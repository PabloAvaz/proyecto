<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Pruebas</title>
	<div th:replace="fragments/head:: head"/>
</head>
<body>
	<nav th:replace="fragments/menu :: menu-principal"/>
	
	<!-- 
	<h1 th:text="${usuario}"></h1>
	 -->
	 
	<h1 id="salida"></h1>
	<image th:if="${usuario!=null}" class="" id="clicker" th:src="@{/img/{img} (img=${usuario.skin.imagen})}" />
	<image th:if="${usuario==null}" class="" id="clicker" th:src="@{/img/default.png}" />

	<script  th:if="${usuario!=null}" th:inline="javascript">
	audio = /*[[
		@{/sounds/{sonido} (sonido=${usuario.skin.sonido})}
		]]*/ "default.wav";

	veces = 0;
	audio = new Audio(audio)
	$("#clicker").click(function(){
		$("#salida").text("Total: " + ++veces);
		audio.play();
		$.ajax({
			url : '/enviar',
			type : 'GET',
			dataType : 'json',
		    success : function(json) {
		    	console.log("Enviado: " , json)
		    }
		});
		if(veces%50==0){
			$("#clicker").addClass("animado");
			setTimeout(function(){$("#clicker").removeClass("animado");}, 4000);
		};
		})
	</script>
	
<script  th:if="${usuario==null}" th:inline="javascript">
	audio = "/sounds/default.wav";

	veces = 0;
	audio = new Audio(audio)
	$("#clicker").click(function(){
		$("#salida").text("Total: " + ++veces);
		audio.play();
		if(veces%50==0){
			$("#clicker").addClass("animado");
			setTimeout(function(){$("#clicker").removeClass("animado");}, 4000);
		};
		})
	</script>
</body>
</html>